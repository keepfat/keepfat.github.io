webpackJsonp([2],{"8R+k":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("IHPB"),i=s.n(a),o=(s("Qbok"),s("+HYV"),s("HkA2")),n=s("Ck0u"),r=s("/o5o"),c=(s("MVMM"),{props:["pageInfo"],computed:{page:function(){return Math.ceil(this.pageInfo.total/this.pageInfo.pagenum)},setList:function(){var t=this.page,e=[],s=[],a=Math.floor(this.pageInfo.pagegroup/2),i=this.pageInfo.current;if(t<=this.pageInfo.pagegroup){for(;t--;)e.push({text:this.page-t,val:this.page-t});return e}for(;t--;)e.push(this.page-t);var o=e.indexOf(i);o<a&&(i=i+a-o),this.pageInfo.current>this.page-a&&(i=this.page-a),e=e.splice(i-a-1,this.pageInfo.pagegroup);do{var n=e.shift();s.push({text:n,val:n})}while(e.length);return this.page>this.pageInfo.pagegroup&&(this.pageInfo.current>a+1&&s.unshift({text:"...",val:s[0].val-1}),this.pageInfo.current<this.page-a&&s.push({text:"...",val:s[s.length-1].val+1})),s}},created:function(t){console.log(this.pageInfo)},methods:{clickCurrent:function(t){this.pageInfo.current!=t&&t>0&&t<this.page+1&&(this.pageInfo.current=t,this.$emit("change",this.pageInfo.current))}}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{directives:[{name:"show",rawName:"v-show",value:t.pageInfo.total>t.pageInfo.pagenum,expression:"pageInfo.total>pageInfo.pagenum"}],staticClass:"pages-wrap"},[s("ul",{staticClass:"pagination clearfix"},[s("li",{class:{disabled:1==t.pageInfo.current}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.clickCurrent(1)}}},[t._v(" 首页 ")])]),t._v(" "),s("li",{class:{disabled:1==t.pageInfo.current}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.clickCurrent(t.pageInfo.current-1)}}},[t._v(" 上一页 ")])]),t._v(" "),t._l(t.setList,function(e){return s("li",{class:{active:t.pageInfo.current==e.val}},[t.pageInfo.current==e.val?s("a",{style:{backgroundColor:t.pageInfo.skin,borderColor:t.pageInfo.skin},attrs:{href:"javascript:;"},on:{click:function(s){t.clickCurrent(e.val)}}},[t._v(" "+t._s(e.text)+" ")]):s("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.clickCurrent(e.val)}}},[t._v(" "+t._s(e.text)+" ")])])}),t._v(" "),s("li",{class:{disabled:t.pageInfo.current==t.pageInfo.page}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.clickCurrent(t.pageInfo.current+1)}}},[t._v("\n      下一页")])]),t._v(" "),s("li",{class:{disabled:t.pageInfo.current==t.pageInfo.page}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.clickCurrent(t.pageInfo.page)}}},[t._v(" 尾页 ")])])],2)])},staticRenderFns:[]};var h=s("Z0/y")(c,l,!1,function(t){s("jQCi")},"data-v-3dc7053b",null).exports,v=s("aozt"),u=s.n(v),p={name:"rooms-list",data:function(){return{allrooms:[],selectSite:[],nowSite:[],pageList:[],base_url:"https://www.vetoer.club/api/v1/",sites:{},sitesChecked:"all",sortFlag:!1,mdShowTips:!1,mdShowInfos:!1,mdShowMessage:"",checkItem:"",website:{douban:"豆瓣小组",wuba:"58同城",ziru:"自如",hizhu:"嗨住"},pageInfo:{total:0,current:1,pagenum:10,pagegroup:5,page:1,skin:"#16a086"},last_time:"",filterBy:!1,overLayFlag:!1}},components:{NavHeader:o.a,NavFooter:n.a,pagination:h,Modal:r.a},mounted:function(){this.getRoomsList("sz")},watch:{nowSite:function(){this.pageList=this.nowSite.slice(0,this.pageInfo.pagenum),this.pageInfo.total=this.nowSite.length,this.pageInfo.page=Math.ceil(this.nowSite.length/this.pageInfo.pagenum),this.pageInfo.current=1}},methods:{getRoomsList:function(t){var e=this,s=this.base_url+t+"/rooms";this.sites={},this.allrooms=[],this.sortFlag=!1,this.sitesChecked="all",this.mdShowTips=!0,this.mdShowMessage="正在获取数据中,请稍候... ...",u.a.get(s).then(function(t){var s=t.data;if(0==s.status){var a=s.result;for(var o in a){var n;e.sites[o]=e.website[o];for(var r=a[o],c=0;c<r.length;c++)r[c].source=e.website[o];(n=e.allrooms).push.apply(n,i()(r))}e.nowSite=e.allrooms.slice(),e.nowSite.sort(function(){return Math.random()>.5}),e.selectSite=a,e.last_time=s.last_time.slice(0,19),e.mdShowTips=!1}else e.mdShowMessage=s.msg}).catch(function(t){e.mdShowMessage="服务器访问错误,请稍后再重试... ..."})},setSourceFilter:function(t){window.scrollTo({behavior:"smooth",top:10}),this.nowSite="all"==t?this.allrooms.slice():this.selectSite[t],this.sitesChecked=t,this.sortFlag=!1},sortRooms:function(t){t!=this.sortFlag&&(t?this.nowSite.sort(function(t,e){return"undefined"==t.price?-1:"undefined"==e.price?1:t.price-e.price}):this.nowSite.sort(function(){return Math.random()>.5}),this.sortFlag=t)},pageChange:function(t){this.pageList=this.nowSite.slice((t-1)*this.pageInfo.pagenum,t*this.pageInfo.pagenum),window.scrollTo({behavior:"smooth",top:10})},cityChange:function(t){this.getRoomsList(t)},showItem:function(t){this.mdShowInfos=!0,this.checkItem=t},gotoSite:function(t){this.mdShowInfos=!1,console.log(t)},closeModal:function(){this.mdShowTips=!1,this.mdShowInfos=!1},showFilterPop:function(){this.filterBy=!0,this.overLayFlag=!0},closePop:function(){this.filterBy=!1,this.overLayFlag=!1}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-header",{on:{change:t.cityChange}}),t._v(" "),s("div",{staticClass:"accessory-result-page accessory-page"},[s("div",{staticClass:"container"},[s("div",{staticClass:"filter-nav"},[s("span",{staticClass:"sortby"},[t._v("Sort by:")]),t._v(" "),s("a",{class:{default:!0,cur:!t.sortFlag},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.sortRooms(!1)}}},[t._v("Default")]),t._v(" "),s("a",{class:{price:!0,cur:t.sortFlag},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.sortRooms(!0)}}},[t._v("Price\n          "),s("svg",{staticClass:"icon icon-arrow-short"},[s("use",{attrs:{"xlink:href":"#icon-arrow-short"}})])]),t._v(" "),s("a",{staticClass:"filterby stopPop",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.stopPropagation(),t.showFilterPop(e)}}},[t._v("Filter by")])]),t._v(" "),s("div",{staticClass:"accessory-result"},[s("div",{staticClass:"filter stopPop",class:{"filterby-show":t.filterBy},attrs:{id:"filter"}},[s("dl",{staticClass:"filter-price"},[s("dt",[t._v("Source:")]),t._v(" "),s("dd",[s("a",{class:{cur:"all"==t.sitesChecked},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.setSourceFilter("all")}}},[t._v("All")])]),t._v(" "),t._l(t.sites,function(e,a){return s("dd",[s("a",{class:{cur:t.sitesChecked==a},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.setSourceFilter(a)}}},[t._v(t._s(e))])])})],2)]),t._v(" "),s("div",{staticClass:"accessory-list-wrap"},[s("div",{staticClass:"accessory-list col-4"},[s("ul",t._l(t.pageList,function(e){return s("li",[s("a",{attrs:{href:"javascript:void(0);"},on:{click:function(s){t.showItem(e)}}},[s("div",{staticClass:"pic"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.img,expression:"item.img"}],attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"title"},[s("h2",{staticClass:"short-text"},[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"detail short-text"},[t._v(t._s(e.detail))]),t._v(" "),s("div",{staticClass:"other-detail"},[s("div",{staticClass:"area"},[t._v(t._s(e.area))]),t._v(" "),s("div",{staticClass:"size"},[t._v(t._s(e.size))]),t._v(" "),s("div",{staticClass:"type"},[t._v(t._s(e.type))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.price,expression:"item.price"}],staticClass:"price"},[s("span",[t._v(t._s(e.price))]),t._v("元")]),t._v(" "),s("div",{staticClass:"source"},[t._v(t._s(e.source))])])])}))]),t._v(" "),s("pagination",{attrs:{pageInfo:t.pageInfo},on:{change:t.pageChange}})],1)])])]),t._v(" "),s("modal",{attrs:{mdShow:t.mdShowTips},on:{close:t.closeModal}},[s("p",{attrs:{slot:"message"},slot:"message"},[t._v("\n      "+t._s(t.mdShowMessage)+"\n    ")])]),t._v(" "),s("modal",{attrs:{mdShow:t.mdShowInfos},on:{close:t.closeModal}},[s("div",{staticClass:"info-modal",attrs:{slot:"message"},slot:"message"},[s("div",{staticClass:"info-title"},[s("h3",[t._v(t._s(t.checkItem.title))])]),t._v(" "),s("div",{staticClass:"info-detail"},[t._v(t._s(t.checkItem.detail))]),t._v(" "),s("div",{staticClass:"info-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.checkItem.img,expression:"checkItem.img"}],attrs:{alt:t.checkItem.title}})]),t._v(" "),s("ul",{staticClass:"info-right"},[s("li",{directives:[{name:"show",rawName:"v-show",value:t.checkItem.area,expression:"checkItem.area"}],staticClass:"info-area"},[t._v(t._s(t.checkItem.area))]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.checkItem.size,expression:"checkItem.size"}],staticClass:"info-size"},[t._v(t._s(t.checkItem.size))]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.checkItem.type,expression:"checkItem.type"}],staticClass:"info-type"},[t._v(t._s(t.checkItem.type))]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.checkItem.pub_time,expression:"checkItem.pub_time"}],staticClass:"info-pubtime"},[t._v(t._s(t.checkItem.pub_time))])])]),t._v(" "),s("div",{attrs:{slot:"btnGroup"},slot:"btnGroup"},[s("a",{staticClass:"btn btn--m",attrs:{href:t.checkItem.url,target:"_blank"}},[t._v("查看详情")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.overLayFlag,expression:"overLayFlag"}],staticClass:"md-overlay",on:{click:function(e){return e.stopPropagation(),t.closePop(e)}}}),t._v(" "),s("nav-footer",[s("span",{staticClass:"last-time"},[t._v(t._s(t.last_time))])])],1)},staticRenderFns:[]};var g=s("Z0/y")(p,f,!1,function(t){s("vqUa")},"data-v-2cc1ce98",null);e.default=g.exports},IHPB:function(t,e,s){"use strict";e.__esModule=!0;var a,i=s("kfHR"),o=(a=i)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return(0,o.default)(t)}},Uha7:function(t,e,s){"use strict";var a=s("bfYp"),i=s("yyor");t.exports=function(t,e,s){e in t?a.f(t,e,i(0,s)):t[e]=s}},a7pz:function(t,e,s){s("YhHm"),s("zH6v"),t.exports=s("TF39").Array.from},jQCi:function(t,e){},kfHR:function(t,e,s){t.exports={default:s("a7pz"),__esModule:!0}},vqUa:function(t,e){},zH6v:function(t,e,s){"use strict";var a=s("ashN"),i=s("NYhm"),o=s("TMqw"),n=s("7N30"),r=s("fvBl"),c=s("Fu43"),l=s("Uha7"),h=s("JPh9");i(i.S+i.F*!s("wlyi")(function(t){Array.from(t)}),"Array",{from:function(t){var e,s,i,v,u=o(t),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,d=void 0!==g,m=0,_=h(u);if(d&&(g=a(g,f>2?arguments[2]:void 0,2)),void 0==_||p==Array&&r(_))for(s=new p(e=c(u.length));e>m;m++)l(s,m,d?g(u[m],m):u[m]);else for(v=_.call(u),s=new p;!(i=v.next()).done;m++)l(s,m,d?n(v,g,[i.value,m],!0):i.value);return s.length=m,s}})}});
//# sourceMappingURL=2.09bd622b22cc847bafc0.js.map